<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>The Network Model · CommonOPF</title><meta name="title" content="The Network Model · CommonOPF"/><meta property="og:title" content="The Network Model · CommonOPF"/><meta property="twitter:title" content="The Network Model · CommonOPF"/><meta name="description" content="Documentation for CommonOPF."/><meta property="og:description" content="Documentation for CommonOPF."/><meta property="twitter:description" content="Documentation for CommonOPF."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">CommonOPF</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">User Documentation</a></li><li><a class="tocitem" href="../inputs/">Inputs</a></li><li class="is-active"><a class="tocitem" href>The Network Model</a><ul class="internal"><li><a class="tocitem" href="#Edges"><span>Edges</span></a></li><li><a class="tocitem" href="#Nodes"><span>Nodes</span></a></li><li><a class="tocitem" href="#Network-Reduction"><span>Network Reduction</span></a></li></ul></li><li><a class="tocitem" href="../variables/">Variables for Mathematical Programs</a></li><li><a class="tocitem" href="../results/">Results</a></li><li><span class="tocitem">Methods</span><ul><li><a class="tocitem" href="../impedance_and_admittance/">Edge Impedances and Admittances</a></li><li><a class="tocitem" href="../graph_methods/">Graphs</a></li><li><a class="tocitem" href="../decomposition/">Decomposing Problems</a></li></ul></li><li><a class="tocitem" href="../math/">Math</a></li><li><span class="tocitem">Developer</span><ul><li><a class="tocitem" href="../developer/developer/">Creating a <code>Network</code></a></li><li><a class="tocitem" href="../developer/impedance_and_admittance_methods/">Impedance and Admittance Methods</a></li><li><a class="tocitem" href="../developer/input_validation/">Input validators and Network builders</a></li><li><a class="tocitem" href="../developer/jump_variables/">JuMP Model Variables</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>The Network Model</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>The Network Model</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/NLaws/CommonOPF.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/NLaws/CommonOPF.jl/blob/main/docs/src/network.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Network-Model"><a class="docs-heading-anchor" href="#Network-Model">Network Model</a><a id="Network-Model-1"></a><a class="docs-heading-anchor-permalink" href="#Network-Model" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonOPF.Network" href="#CommonOPF.Network"><code>CommonOPF.Network</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct Network &lt;: AbstractNetwork
    graph::MetaGraphsNext.AbstractGraph
    substation_bus::String
    Sbase::Real
    Vbase::Real
    Zbase::Real
    v0::Union{Real, AbstractVecOrMat{&lt;:Number}}
    Ntimesteps::Int
    bounds::VariableBounds
    var_names::AbstractVector{Symbol}
    var_info::Dict{Symbol, VariableInfo}
end</code></pre><p>The <code>Network</code> model is used to store all the inputs required to create power flow and optimal power flow models. Underlying the Network model is a <code>MetaGraphsNext.MetaGraph</code> that stores the edge and node data in the network. </p><p>We leverage the <code>AbstractNetwork</code> type to make an intuitive interface for the Network model. For example, <code>edges(network)</code> returns an iterator of edge tuples with bus name values; (but if we used <code>Graphs.edges(MetaGraph)</code> we would get an iterator of Graphs.SimpleGraphs.SimpleEdge with integer values).</p><p>A Network can be created directly, via a <code>Dict</code>, or a filepath. The minimum inputs must have a vector of <a href="../inputs/#Conductor">Conductor</a> specifications and a <code>Network</code> key containing at least the <code>substation_bus</code>. See <a href="../inputs/#Input-Formats">Input Formats</a> for more details.</p><p><code>var_names</code> is empty be default. It is used in the results getters like <code>opf_results</code>.</p><p><code>var_info</code> and <code>constraint_info</code> are empty be default. They are used in other packages like BranchFlowModel.jl to document the variables and constraints that are created for OPF models. See <a href="../variables/#CommonOPF.VariableInfo"><code>VariableInfo</code></a> for more.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NLaws/CommonOPF.jl/blob/4e3e8ade712113aedfcb6b40a1f3c421d9d39f77/src/types.jl#L111-L143">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonOPF.Network-Tuple{String}" href="#CommonOPF.Network-Tuple{String}"><code>CommonOPF.Network</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">function Network(fp::String; allow_parallel_conductor::Bool=false)</code></pre><p>Construct a <code>Network</code> from a yaml or OpenDSS file at the file path <code>fp</code>. Pass <code>allow_parallel_conductor=true</code> to merge duplicate conductors between the same busses into a <a href="@ref"><code>ParallelConductor</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NLaws/CommonOPF.jl/blob/4e3e8ade712113aedfcb6b40a1f3c421d9d39f77/src/network.jl#L115-L121">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonOPF.Network-Tuple{Dict}" href="#CommonOPF.Network-Tuple{Dict}"><code>CommonOPF.Network</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">function Network(d::Dict; directed::Union{Bool,Missing}=missing, allow_parallel_conductor::Bool=false)</code></pre><p>Construct a <code>Network</code> from a dictionary that has at least keys for:</p><ol><li><code>:Conductor</code>, a vector of dicts with <a href="../inputs/#Conductor">Conductor</a> specs</li><li><code>:Network</code>, a dict with at least <code>:substation_bus</code></li></ol><p>If <code>directed</code> is missing then the graph is directed only if the number of busses and edges imply a radial graph.</p><p>If <code>allow_parallel_conductor</code> is <code>true</code>, duplicate <code>Conductor</code> entries between the same pair of busses are stored as a <a href="@ref"><code>ParallelConductor</code></a>. Otherwise a duplicate edge raises an error.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NLaws/CommonOPF.jl/blob/4e3e8ade712113aedfcb6b40a1f3c421d9d39f77/src/network.jl#L40-L51">source</a></section></article><h2 id="Edges"><a class="docs-heading-anchor" href="#Edges">Edges</a><a id="Edges-1"></a><a class="docs-heading-anchor-permalink" href="#Edges" title="Permalink"></a></h2><p>The edges of the Network model include all power transfer elements, i.e. the devices in the power system that move power from one place to another and therefore have two or more busses. Edges include:</p><ul><li><a href="../inputs/#Conductor">Conductor</a></li><li><a href="../inputs/#VoltageRegulator">VoltageRegulator</a></li><li><a href="../inputs/#Transformer">Transformer</a></li></ul><p>Duplicate conductor entries between the same pair of busses can be merged into a <code>ParallelConductor</code> by passing <code>allow_parallel_conductor=true</code> when building the <a href="#CommonOPF.Network"><code>Network</code></a>. Impedance and admittance functions treat a <code>ParallelConductor</code> the same as a single conductor whose parameters are the parallel combination of the contained lines.</p><p>Within the network model edges are indexed via two-tuples of bus names like so:</p><pre><code class="language-julia hljs">using CommonOPF
net = Network_IEEE13_SinglePhase()
net[(&quot;650&quot;, &quot;632&quot;)]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">CommonOPF.Conductor
  busses: Tuple{String, String}
  phases: Missing missing
  name: String &quot;mtx601&quot;
  template: Missing missing
  r0: Missing missing
  x0: Missing missing
  r1: Float64 0.185966659863092
  x1: Float64 0.596766656810831
  c1: Missing missing
  rmatrix: Missing missing
  xmatrix: Missing missing
  cmatrix: Missing missing
  length: Float64 0.3787878787878788
  amps_limit: Missing missing
</code></pre><h2 id="Nodes"><a class="docs-heading-anchor" href="#Nodes">Nodes</a><a id="Nodes-1"></a><a class="docs-heading-anchor-permalink" href="#Nodes" title="Permalink"></a></h2><p>The abstract node in the graph model is really an electrical bus. In single phase models a bus and a node are synonymous. However, in multi-phase models we can think of each bus have multiple nodes, or terminals, where each phase-wire connects. Busses are implicitly specified in the <code>busses</code> of the edge specifications.</p><p>Nodes contain:</p><ul><li><a href="../inputs/#Load">Load</a></li><li><a href="../inputs/#Capacitor">Capacitor</a></li><li><a href="../inputs/#ShuntAdmittance">ShuntAdmittance</a></li></ul><p>Within the network model busses are indexed via bus names like so:</p><pre><code class="language-julia hljs">using CommonOPF
net = Network_IEEE13_SinglePhase()
net[&quot;675&quot;]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Dict{Symbol, Any} with 1 entry:
  :Load =&gt; Load(&quot;675&quot;, [281], [154], missing, missing, missing, missing, missin…</code></pre><h3 id="Terminals"><a class="docs-heading-anchor" href="#Terminals">Terminals</a><a id="Terminals-1"></a><a class="docs-heading-anchor-permalink" href="#Terminals" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonOPF.terminals" href="#CommonOPF.terminals"><code>CommonOPF.terminals</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">terminals(net::Network{MultiPhase})::Vector{BusTerminal}</code></pre><p>For all the busses, for all the ordered phases at each bus, create a BusTerminal and return them in a vector.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NLaws/CommonOPF.jl/blob/4e3e8ade712113aedfcb6b40a1f3c421d9d39f77/src/busses/terminals.jl#L93-L98">source</a></section><section><div><pre><code class="language-julia hljs">terminals(net::Network{SinglePhase})::Vector{BusTerminal}</code></pre><p>For all the busses create a BusTerminal and return them in a vector. SinglePhase Networks have BusTerminal.phase set to 1.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NLaws/CommonOPF.jl/blob/4e3e8ade712113aedfcb6b40a1f3c421d9d39f77/src/busses/terminals.jl#L114-L119">source</a></section></article><h2 id="Network-Reduction"><a class="docs-heading-anchor" href="#Network-Reduction">Network Reduction</a><a id="Network-Reduction-1"></a><a class="docs-heading-anchor-permalink" href="#Network-Reduction" title="Permalink"></a></h2><p>A few convenience methods are provided in <code>CommonOPF</code> for reducing network complexity by removing intermediate busses and trimming branches that will not typically impact OPF results.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonOPF.remove_bus!-Tuple{String, Network{SinglePhase}}" href="#CommonOPF.remove_bus!-Tuple{String, Network{SinglePhase}}"><code>CommonOPF.remove_bus!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">remove_bus!(j::String, net::Network{SinglePhase})</code></pre><p>Remove bus <code>j</code> in the line i-&gt;j-&gt;k from the model by making an equivalent line from busses i-&gt;k</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NLaws/CommonOPF.jl/blob/4e3e8ade712113aedfcb6b40a1f3c421d9d39f77/src/network_reduction.jl#L44-L48">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonOPF.reduce_tree!-Tuple{Network{SinglePhase}}" href="#CommonOPF.reduce_tree!-Tuple{Network{SinglePhase}}"><code>CommonOPF.reduce_tree!</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">reduce_tree!(net::Network{SinglePhase})</code></pre><p>combine any line sets with intermediate busses that have indegree == outdegree == 1 and is not a load bus into a single line</p><p>See <code>remove_bus!</code> for how the two lines are combined.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NLaws/CommonOPF.jl/blob/4e3e8ade712113aedfcb6b40a1f3c421d9d39f77/src/network_reduction.jl#L1-L8">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonOPF.trim_tree!" href="#CommonOPF.trim_tree!"><code>CommonOPF.trim_tree!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">trim_tree!(net::Network)</code></pre><p>Trim any branches that have empty busses, i.e. remove the branches that have no loads or DER.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NLaws/CommonOPF.jl/blob/4e3e8ade712113aedfcb6b40a1f3c421d9d39f77/src/network_reduction.jl#L157-L161">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonOPF.trim_tree_once!" href="#CommonOPF.trim_tree_once!"><code>CommonOPF.trim_tree_once!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">trim_tree_once!(net::Network)</code></pre><p>A support function for <code>trim_tree!</code>, <code>trim_tree_once!</code> removes all the empty leaf busses. When trimming the tree sometimes new leafs are created. So <code>trim_tree!</code> loops over <code>trim_tree_once!</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NLaws/CommonOPF.jl/blob/4e3e8ade712113aedfcb6b40a1f3c421d9d39f77/src/network_reduction.jl#L128-L133">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../inputs/">« Inputs</a><a class="docs-footer-nextpage" href="../variables/">Variables for Mathematical Programs »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Friday 3 October 2025 01:21">Friday 3 October 2025</span>. Using Julia version 1.11.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
