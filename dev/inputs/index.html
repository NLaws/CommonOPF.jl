<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Inputs · CommonOPF</title><meta name="title" content="Inputs · CommonOPF"/><meta property="og:title" content="Inputs · CommonOPF"/><meta property="twitter:title" content="Inputs · CommonOPF"/><meta name="description" content="Documentation for CommonOPF."/><meta property="og:description" content="Documentation for CommonOPF."/><meta property="twitter:description" content="Documentation for CommonOPF."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">CommonOPF</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">User Documentation</a></li><li class="is-active"><a class="tocitem" href>Inputs</a><ul class="internal"><li><a class="tocitem" href="#Conductor"><span>Conductor</span></a></li><li><a class="tocitem" href="#Load"><span>Load</span></a></li><li><a class="tocitem" href="#ShuntAdmittance"><span>ShuntAdmittance</span></a></li><li><a class="tocitem" href="#Transformer"><span>Transformer</span></a></li><li><a class="tocitem" href="#VoltageRegulator"><span>VoltageRegulator</span></a></li></ul></li><li><a class="tocitem" href="../network/">The Network Model</a></li><li><a class="tocitem" href="../variables/">Variables for Mathematical Programs</a></li><li><a class="tocitem" href="../results/">Results</a></li><li><span class="tocitem">Methods</span><ul><li><a class="tocitem" href="../impedances/">Edge Impedances</a></li><li><a class="tocitem" href="../graph_methods/">Graphs</a></li><li><a class="tocitem" href="../decomposition/">Decomposing Problems</a></li></ul></li><li><a class="tocitem" href="../math/">Math</a></li><li><span class="tocitem">Developer</span><ul><li><a class="tocitem" href="../developer/developer/">Creating a <code>Network</code></a></li><li><a class="tocitem" href="../developer/input_validation/">Input validators and Network builders</a></li><li><a class="tocitem" href="../developer/jump_variables/">JuMP Model Variables</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Inputs</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Inputs</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/NLaws/CommonOPF.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/NLaws/CommonOPF.jl/blob/main/docs/src/inputs.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Input-Formats"><a class="docs-heading-anchor" href="#Input-Formats">Input Formats</a><a id="Input-Formats-1"></a><a class="docs-heading-anchor-permalink" href="#Input-Formats" title="Permalink"></a></h1><p>CommmonOPF provides three ways to construct the <a href="../network/#Network-Model">Network Model</a> model:</p><ol><li>YAML file(s)</li><li>JSON file(s)</li><li>Julia code (manual)</li></ol><p>Only <code>Network</code> and <code>Conductor</code> are required to build the <code>Network</code>. Note that the input keys are, singular, CamelCase words to align with the data type names. For example a single phase, single time step model looks like:</p><pre><code class="language-yaml hljs">Network:
  substation_bus: b1

Conductor:
  - name: cond1
    busses: 
      - b1
      - b2
    r1: 0.301  # impedance has units of ohm/per-unit-length
    x1: 0.627
    length: 100
  - busses:
      - b2
      - b3
    template: cond1  # &lt;- reuse impedance of cond1
    length: 200

Load:
  - bus: b2
    kws1: 
      - 5.6  # you can specify more loads at each bus to add time steps
    kvars1: 
      - 1.2
  - bus: b3
    kws1: 
      - 5.6
    kvars1: 
      - 1.2</code></pre><p>The <a href="../network/#CommonOPF.Network-Tuple{String}"><code>Network(fp::String)</code></a> constructor excepts a path to a yaml file.</p><h2 id="Conductor"><a class="docs-heading-anchor" href="#Conductor">Conductor</a><a id="Conductor-1"></a><a class="docs-heading-anchor-permalink" href="#Conductor" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonOPF.Conductor" href="#CommonOPF.Conductor"><code>CommonOPF.Conductor</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct Conductor &lt;: AbstractEdge</code></pre><p>Interface for conductors in a Network. Fieldnames can be provided via a YAML file, JSON file, or     populated manually. Conductors are specified via two busses, the <strong>impedance in ohms per-unit     length</strong>, and a length value. </p><p><strong>Single phase models</strong></p><p>The minimum inputs for a single phase conductor look like:</p><pre><code class="language-yaml hljs">Conductor:
  - busses: 
      - b1
      - b2
    r1: 0.1
    x1: 0.1
    length: 100</code></pre><p>Note that the order of the items in the YAML file does not matter.</p><p>A conductor can also leverage a <code>template</code>, i.e. another conductor with a <code>name</code> that matches the <code>template</code> value so that we can re-use the impedance values:</p><pre><code class="language-yaml hljs">Conductor:
  - name: cond1
    busses: 
      - b1
      - b2
    r1: 0.1
    x1: 0.1
    length: 100
  - busses:
      - b2
      - b3
    template: cond1
    length: 200</code></pre><p>The second conductor in the <code>conductors</code> above will use the <code>r0</code> and <code>x0</code> values from <code>cond1</code>, scaled by the <code>length</code> of 200 and normalized by <code>Zbase</code>.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The <code>name</code> field is optional unless a <code>conductor.name</code> is also the <code>template</code> of another conductor.</p></div></div><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>If any <code>phases</code> properties are set in the <code>conductors</code> then it is assumed that the model is  multi-phase.</p></div></div><p><strong>Multi-phase models</strong></p><p>Multi-phase conductors can be modeled as symmetrical or asymmetrical components. Similar to OpenDSS, line impedances can be specified via the zero and positive sequence impedances, <code>(r0, x0)</code> and <code>(r1, x1)</code> respectively; or via the lower-diagaonal portion of the phase-impedance matrix. </p><p>Using the Multi-phase models require specifing <code>phases</code> (and the zero and positive sequence impedances) like:</p><pre><code class="language-yaml hljs">Conductor:
  - busses: 
      - b1
      - b2
    phases:
      - 2
      - 3
    r0: 0.766
    x0: 1.944
    r1: 0.301
    x1: 0.627
    length: 100</code></pre><p>When the sequence impedances are provided the phase-impedance matrix is determined using the math in <a href="../math/#Symmetrical-Mutliphase-Conductors">Symmetrical Mutliphase Conductors</a>.</p><p>Alternatively one can specify the <code>rmatrix</code> and <code>xmatrix</code> like:</p><pre><code class="language-yaml hljs">Conductor:
  - busses: 
      - b1
      - b2
    phases:
      - 1
      - 3
    rmatrix: 
      - [0.31]
      - [0.15, 0.32]
    xmatrix:
      - [1.01]
      - [0.5, 1.05]
    length: 100</code></pre><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>The order of the <code>phases</code> is assumed to match the order of the <code>rmatrix</code> and <code>xmatrix</code>. For example using the example just above the 3x3 <code>rmatrix</code> looks like  <span>$[0.31, 0, 0.15; 0, 0, 0; 0.15, 0, 0.32]$</span></p></div></div><p>Conductors also have a <code>cmatrix</code> attribute that is used when parsing OpenDSS models. The <code>cmatrix</code> is used to define <code>ShuntAdmittance</code> values for busses.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NLaws/CommonOPF.jl/blob/740282653939fbad66f9b734763f97d7ac0d1226/src/edges/conductors.jl#L1-L99">source</a></section></article><h2 id="Load"><a class="docs-heading-anchor" href="#Load">Load</a><a id="Load-1"></a><a class="docs-heading-anchor-permalink" href="#Load" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonOPF.Load" href="#CommonOPF.Load"><code>CommonOPF.Load</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">@with_kw mutable struct Load &lt;: AbstractBus</code></pre><p>A Load input specifier, mapped from YAML, JSON, or manually populated.</p><p>The minimum required inputs include several options. All require a <code>bus</code> to place the load. For single phase models provide one of the following sets of values:</p><ul><li><code>bus</code>, <code>kws1</code></li><li><code>bus</code>, <code>kws1</code>, <code>kvars1</code></li><li><code>bus</code>, <code>kws1</code>, <code>q_to_p</code></li><li><code>bus</code>, <code>csv</code> </li></ul><p>where <code>csv</code> is a path to a two column CSV file with a single line header like &quot;kws1,kvars1&quot;. If only <code>bus</code> and <code>kws1</code> are provided then the reactive load will be zero in the power flow model.</p><p>For unbalanced multiphase models one must provide one of:</p><ul><li><code>bus</code>, [<code>kws1</code>, <code>kvars1</code>], [<code>kws2</code>, <code>kvars2</code>], [<code>kws3</code>, <code>kvars3</code>] &lt;– brackets imply optional pairs, depending on the phases at the load bus</li><li><code>bus</code>, <code>csv</code></li></ul><p>where the <code>csv</code> has 2, 4, or 6 columns with a single line header like &quot;kws1,kvars1,kws2,kvars2,kws3,kvars3&quot; or &quot;kws2,kvars2,kws3,kvars3&quot;.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The <code>kws</code> and <code>kvars</code> inputs are plural because we always put the loads in vectors, even with one timestep. We do this so that the modeling packages that build on CommonOPF do not have to account for both scalar values and vector values.</p></div></div><p>Once the <code>net::Network</code> is defined a load can be accessed like:</p><pre><code class="language-julia hljs">ld_busses = collect(load_busses(net))
lb = ld_busses[1]  # bus keys are strings in the network
net[lb, :kws, 1]  # last index is phase integer</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NLaws/CommonOPF.jl/blob/740282653939fbad66f9b734763f97d7ac0d1226/src/busses/loads.jl#L1-L33">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.getindex-Tuple{Network, String, Symbol, Int64}" href="#Base.getindex-Tuple{Network, String, Symbol, Int64}"><code>Base.getindex</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function Base.getindex(net::Network, bus::String, kws_kvars::Symbol, phase::Int)</code></pre><p>Load getter for <code>Network</code>. Use like:</p><pre><code class="language-julia hljs">net[&quot;busname&quot;, :kws, 2]

net[&quot;busname&quot;, :kvars, 3]</code></pre><p>The second argument must be one of <code>:kws</code> or <code>:kvars</code>. The third arbument must be one of <code>[1,2,3]</code>. If the <code>&quot;busname&quot;</code> exists and has a <code>:Load</code> dict, but the load (e.g. <code>:kvars2</code>) is not defined then <code>zeros(net.Ntimesteps)</code> is returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NLaws/CommonOPF.jl/blob/740282653939fbad66f9b734763f97d7ac0d1226/src/network.jl#L150-L162">source</a></section></article><h2 id="ShuntAdmittance"><a class="docs-heading-anchor" href="#ShuntAdmittance">ShuntAdmittance</a><a id="ShuntAdmittance-1"></a><a class="docs-heading-anchor-permalink" href="#ShuntAdmittance" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonOPF.ShuntAdmittance" href="#CommonOPF.ShuntAdmittance"><code>CommonOPF.ShuntAdmittance</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct ShuntAdmittance &lt;: AbstractBus</code></pre><p>Required fields:</p><ul><li><code>bus::String</code></li><li><code>g::Real</code> conductance in siemens</li><li><code>b::Real</code> susceptance in siemens</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NLaws/CommonOPF.jl/blob/740282653939fbad66f9b734763f97d7ac0d1226/src/busses/shunt_admittances.jl#L1-L8">source</a></section></article><h2 id="Transformer"><a class="docs-heading-anchor" href="#Transformer">Transformer</a><a id="Transformer-1"></a><a class="docs-heading-anchor-permalink" href="#Transformer" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonOPF.Transformer" href="#CommonOPF.Transformer"><code>CommonOPF.Transformer</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">@with_kw mutable struct Transformer &lt;: AbstractEdge
    # required values
    busses::Tuple{String, String}
    # optional values
    high_kv::Real = 1.0
    low_kv::Real = 1.0
    phases::Union{Vector{Int}, Missing} = missing
    reactance::Real = 0.0
    resistance::Real = 0.0
end</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>For now the <code>high_kv</code> and <code>low_kv</code> values are only for reference. Throughout the modules that use CommonOPF we model in per-unit voltage. In the future we may add capability for scaling to absolute voltage in the future (in Results for example).</p></div></div><p>When <code>phases</code> are not provided the model is assumed to be single phase.</p><p>Series impedance defaults to zero.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NLaws/CommonOPF.jl/blob/740282653939fbad66f9b734763f97d7ac0d1226/src/edges/transformers.jl#L1-L21">source</a></section></article><h2 id="VoltageRegulator"><a class="docs-heading-anchor" href="#VoltageRegulator">VoltageRegulator</a><a id="VoltageRegulator-1"></a><a class="docs-heading-anchor-permalink" href="#VoltageRegulator" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonOPF.VoltageRegulator" href="#CommonOPF.VoltageRegulator"><code>CommonOPF.VoltageRegulator</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">struct VoltageRegulator &lt;: AbstractEdge
    # required values
    busses::Tuple{String, String}
    # optional values
    high_kv::Real = 1.0
    low_kv::Real = 1.0
    phases::Union{Vector{Int}, Missing} = missing
    reactance::Real = 0.0
    resistance::Real = 0.0
    vreg_pu::Union{Real, AbstractVector{&lt;:Number}, Missing} = missing
    turn_ratio::Union{Real, Missing} = missing
end</code></pre><p>Required fields:</p><ul><li><code>busses::Tuple{String, String}</code></li><li>either <code>vreg_pu::Real</code> or <code>turn_ratio::Real</code></li></ul><p>If <code>vreg_pu</code> is specified then the regulator is &quot;perfect&quot; and the second bus in <code>busses</code> is fixed to the value provided for <code>vreg_pu</code>.</p><p>If <code>turn_ratio</code> is provided then the voltage across the regulator is scaled by the <code>turn_ratio</code>.</p><p><strong>Examples:</strong></p><p><strong>Julia Dict</strong></p><pre><code class="language-julia hljs">netdict = Dict(
    :network =&gt; Dict(:substation_bus =&gt; &quot;1&quot;, :Sbase =&gt; 1),
    :conductors =&gt; [
        ...
    ],
    :voltage_regulators =&gt; [
        Dict(
            :busses =&gt; (&quot;2&quot;, &quot;3&quot;)
            :vreg_pu =&gt; 1.05
        )
    ]
)</code></pre><p><strong>YAML file</strong></p><pre><code class="language-yaml hljs">Network:
  substation_bus: 0
  Sbase: 1

Conductor:
    ...

VoltageRegulator:
  busses: 
    - 2
    - 3
  vreg_pu: 1.05</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NLaws/CommonOPF.jl/blob/740282653939fbad66f9b734763f97d7ac0d1226/src/edges/voltage_regulators.jl#L1-L55">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« User Documentation</a><a class="docs-footer-nextpage" href="../network/">The Network Model »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Saturday 10 August 2024 00:59">Saturday 10 August 2024</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
